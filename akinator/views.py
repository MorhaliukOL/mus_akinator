"""
Response example that we get on
requests.post()

response = {"status":"success",
            "result":[{"song_id":"2396871","artist_id":"456537","title":"Faded","title_with_featured":"Faded (Ft. Iselin Solheim)","full_title":"Faded by Alan Walker (Ft. Iselin Solheim)","artist":"Alan Walker","lyrics":"[Verse 1: Iselin Solheim]\r\n You were the shadow to my light\r\n Did you feel us?\r\n Another star, you fade away\r\n Afraid our aim is out of sight\r\n Wanna see us alight\r\n \r\n [Pre-Chorus 1: Iselin Solheim]\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n Was it all in my fantasy?\r\n Where are you now?\r\n Were you only imaginary?\r\n \r\n [Chorus: Iselin Solheim]\r\n Where are you now?\r\n Atlantis, under the sea\r\n Under the sea\r\n Where are you now?\r\n Another dream\r\n The monster's running wild inside of me\r\n I'm faded\r\n I'm faded\r\n So lost, I'm faded\r\n I'm faded\r\n So lost, I'm faded\r\n [Verse 2: Iselin Solheim]\r\n These shallow waters never met what I needed\r\n I'm letting go, a deeper dive\r\n Eternal silence of the sea\r\n I'm breathing, alive\r\n \r\n [Pre-Chorus 2: Iselin Solheim]\r\n Where are you now?\r\n Where are you now?\r\n Under the bright but faded lights\r\n You set my heart on fire\r\n Where are you now?\r\n Where are you now?\r\n \r\n [Chorus: Iselin Solheim]\r\n Where are you now?\r\n Atlantis, under the sea\r\n Under the sea\r\n Where are you now?\r\n Another dream\r\n The monster's running wild inside of me\r\n I'm faded\r\n I'm faded\r\n So lost, I'm faded\r\n I'm faded\r\n So lost, I'm faded",
                       "media":"[{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=60ItHLz5WEA\"},{\"provider\":\"apple_music\",\"provider_id\":\"1058093278\",\"type\":\"audio\",\"url\":\"https:\\/\\/itunes.apple.com\\/lookup?entity=song\u0026id=1058093278\"},{\"native_uri\":\"spotify:track:1brwdYwjltrJo7WHpIvbYt\",\"provider\":\"spotify\",\"type\":\"audio\",\"url\":\"https:\\/\\/open.spotify.com\\/track\\/1brwdYwjltrJo7WHpIvbYt\"}]"},
                      {"song_id":"3249941","artist_id":"21941","title":"Dusk Till Dawn ft. Sia (SING OFF vs. Madison Beer)","title_with_featured":"Dusk Till Dawn ft. Sia (SING OFF vs. Madison Beer) (Ft. Madison Beer)","full_title":"Dusk Till Dawn ft. Sia (SING OFF vs. Madison Beer) by Conor Maynard (Ft. Madison Beer)","artist":"Conor Maynard","lyrics":"[Conor Maynard] (Adele - Hello)\r\n Hello, it's me\r\n I was wondering if after all these years you'd like to meet\r\n \r\n [Madison Beer] (Khalid - location)\r\n Send me your location, let's\r\n Focus on communicating\r\n 'Cause I just need the time and place to come through\r\n \r\n [Conor Maynard] (Alan Walker - Faded)\r\n You were the shadow to my light\r\n Did you feel us?\r\n Another star, you fade away\r\n \r\n [Madison Beer] (French Montana - Unforgettable Ft. Swae Lee)\r\n Cause you are unforgettable\r\n I need to get you alone (oeh)\r\n \r\n [Conor Maynard\u0026amp;Madison Beer] (Eminem - Love The Way You Lie Ft. Rihanna)\r\n Just gonna stand there and watch me burn\r\n Well, that's all right\r\n Because I like the way it hurts\r\n \r\n [Madison Beer] (B.o.B - Airplanes Ft. Hayley Williams)\r\n Can we pretend that airplanes\r\n In the night sky are like shooting stars?\r\n I could really use a wish right now\r\n Wish right now, wish right now\r\n [Conor Maynard] (Ellie Goulding - Love Me Like You Do)\r\n So love me like you do, la-la-love me like you do\r\n Touch me like you do, ta-ta-touch me like you do (ohh)\r\n \r\n [Madison Beer] (Shontelle - Impossible)\r\n I remember years ago\r\n Someone told me I should take\r\n Caution when it comes to love\r\n I did\r\n \r\n [Conor Maynard] (Wiz Khalifa - See You Again Ft. Charlie Puth)\r\n It's been a long day without you, my friend\r\n And I'll tell you all about it when I see you again\r\n \r\n [Madison Beer] (Rihanna - Diamonds)\r\n So, shine bright tonight\r\n You and I\r\n We're beautiful, like diamonds in the sky\r\n \r\n [Conor Maynard] (Michael Jackson - Human Nature)\r\n Why, why\r\n I tell them that it's human nature\r\n Why, why does he do that way\r\n \r\n [Madison Beer] (Sam Smith - Stay With Me)\r\n Oh won't you stay with me?\r\n Cause you're all I need\r\n [Conor Maynard] (Fall Out Boy - Sugar, We're Goin Down)\r\n We're going down, down in an earlier round\r\n And sugar, we're going down swinging\r\n I'll be your number one with a bullet\r\n A loaded God complex, cock it and pull it, Yeah\r\n \r\n [Madison Beer] (Justin Bieber - Sorry)\r\n Is it too late now to say sorry?\r\n Cause I'm\r\n \r\n [Conor Maynard] (Justin Bieber - Sorry)\r\n Missing more than just your body\r\n \r\n [Madison Beer] (Coldplay - Magic)\r\n And I don't, And I don't, And I don't, And I don't\r\n No I don't, it's true\r\n No I don't, No, I don't, No, I don't, No, I don't\r\n Want anybody else but you\r\n \r\n [Conor Maynard] (Madison Beer - Dead)\r\n You say you can't live without me\r\n So why aren't you dead yet?\r\n Why you still breathing?\r\n And you say you can't live without me\r\n \r\n [Madison Beer] (Cash Cash - All My Love Ft. Conor Maynard)\r\n How can I sleep when you're out there\r\n With all my love?\r\n [Madison Beer] (Linkin Park - Numb)\r\n I've become so numb, I can't feel you there\r\n \r\n [Conor Maynard] (Linkin Park - Numb)\r\n Become so tired, so much more aware\r\n \r\n [Conor Maynard\u0026amp;Madison Beer] (ZAYN - Dusk Till Dawn Ft. Sia)\r\n But you'll never be alone\r\n I'll be with you from dusk till dawn\r\n I'll be with you from dusk till dawn\r\n Baby, I am right here\r\n I'll hold you when things go wrong\r\n I'll be with you from dusk till dawn\r\n I'll be with you from dusk till dawn\r\n Baby, I am right here",
                       "media":"[{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=AoQMHzkj2x0\"}]"},
                      {"song_id":"2866541","artist_id":"21941","title":"Faded","title_with_featured":"Faded","full_title":"Faded by Conor Maynard","artist":"Conor Maynard","lyrics":"[Verse 1]\r\n You were the shadow to my light\r\n Did you see us?\r\n Another star, you fade away\r\n Afraid our aim is out of sight\r\n Wanna see us, alive\r\n Where are you now? uuuh\r\n Where are you now? oh\r\n Where are you now?\r\n Was it all in my fantasy?\r\n Where are you now?\r\n Were you only imaginary?\r\n \r\n [Chorus]\r\n Where are you now?\r\n Atlantis\r\n Under the sea\r\n Under the sea\r\n Where are you now?\r\n Another dream\r\n The monster's running wild inside of me\r\n I'm faded, I'm faded\r\n Yeah, I'm faded, I'm faded\r\n So lost\r\n \r\n Where are you now?\r\n Atlantis\r\n Under the sea\r\n Under the sea\r\n Where are you now?\r\n Another dream\r\n The monsters running wild inside of me\r\n I'm faded, I'm faded\r\n Yeah yeah yeah, faded, faded\r\n I'm so faded, faded\r\n I'm so faded, faded\r\n Faded, faded, faded ye yeaah",
                       "media":"[{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=IgCphQCkHSk\"}]"},
                      {"song_id":"3300109","artist_id":"210746","title":"Faded (Cover)","title_with_featured":"Faded (Cover)","full_title":"Faded (Cover) by Bars and Melody","artist":"Bars and Melody","lyrics":"[Charlie:]\r\n You were the shadow to my light\r\n Did you feel us?\r\n Another start\r\n You fade away\r\n Afraid our aim is out of sight\r\n Wanna see us\r\n Alive\r\n \r\n Where are you now?\r\n \r\n [Leo:]\r\n Its so cold, down here in the dark, i have nothing left you have taken my heart, just keep breaking it down and keep breaking it down dont worry I’m used to it, keep breaking me now you’ve taken all control\r\n And i can’t seem to see i try to gather up the courage but you rip it out of me\r\n I would sell my soul if only i could know it all\r\n But i held the key all this time\r\n \r\n [Charlie:]\r\n Where are you now?\r\n Atlantis\r\n Under the sea\r\n Under the sea\r\n Where are you now?\r\n Another dream\r\n The monster's running wild inside of me\r\n I'm faded\r\n I'm faded\r\n So lost, I'm faded\r\n I'm faded\r\n So lost, I'm faded\r\n [Leo:]\r\n When i look into the stars and whisper at the moon\r\n I think of birds singing in the sunny afternoon\r\n I was beginning to feel the power, it struck me like a storm\r\n Is this out of site, take me to where i dont belong\r\n But I’m getting sidetracked, and i can’t stay focused\r\n Hold it in ur heart but your heart is wide open\r\n Am i supposed to accept that this is meant to be\r\n I want to be a part of something that is more than me!\r\n Am i the only one, tell me I’m not alone\r\n Tell me what i want to hear\r\n Tell me I’m going home\r\n Then come and kick me to the ground, lock me up in chains\r\n Make me feel like im worth nothing so I’m scared to use my brain\r\n Am i ever gonna break this\r\n Can i ever feel\r\n Now that I’m awake this has never seemed so real\r\n The depths have got the best of me i can’t seem to see and I’m tired of empty promises that you can never keep\r\n I hear the silence talks to me, telling me to run away\r\n But i can’t bring myself to fight or ever see the day\r\n Yes i am alone but i still have a heart\r\n One day i will find the strength to tear your world apart\r\n \r\n [Charlie:]\r\n Where are you now?\r\n Atlantis\r\n Under the sea\r\n Under the sea\r\n Where are you now?\r\n Another dream\r\n The monster's running wild inside of me\r\n I'm faded\r\n I'm faded\r\n So lost, I'm faded\r\n I'm faded\r\n So lost, I'm faded",
                       "media":"[{\"provider\":\"youtube\",\"start\":10,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=wz4azfQg9qk\"}]"},
                      {"song_id":"2866551","artist_id":"456537","title":"Faded (Dash Berlin Remix)","title_with_featured":"Faded (Dash Berlin Remix)","full_title":"Faded (Dash Berlin Remix) by Alan Walker","artist":"Alan Walker","lyrics":"You were the shadow to my light\r\n Did you feel us\r\n Another start\r\n You fade away\r\n Afraid our aim is out of sight\r\n Wanna see us\r\n Alive\r\n \r\n Where are you now\r\n Where are you now\r\n Where are you now\r\n Was it all in my fantasy\r\n Where are you now\r\n Were you only imaginary\r\n Where are you now\r\n \r\n Atlantis\r\n Under the sea\r\n Under the sea\r\n Where are you now\r\n Another dream\r\n The monsters running wild inside of me\r\n \r\n I'm faded\r\n I'm faded\r\n I'm faded\r\n I'm faded\r\n Where are you now\r\n I'm faded","media":"[{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=VSk5JOg6nQQ\"}]"},
                      {"song_id":"2866561","artist_id":"456537","title":"Faded (Tungevaag \u0026 Raaban Remix)","title_with_featured":"Faded (Tungevaag \u0026 Raaban Remix)","full_title":"Faded (Tungevaag \u0026 Raaban Remix) by Alan Walker","artist":"Alan Walker","lyrics":"You were the shadow to my light\r\n Did you feel us\r\n Another start\r\n You fade away\r\n Afraid our aim is out of sight\r\n Wanna see us\r\n Alive\r\n \r\n Where are you now\r\n Where are you now\r\n Where are you now\r\n Was it all in my fantasy\r\n Where are you now\r\n Were you only imaginary\r\n Where are you now\r\n Where are you now\r\n The monsters running wild inside of me\r\n \r\n I'm faded\r\n The monsters running wild inside of me\r\n I'm faded\r\n \r\n I'm faded\r\n \r\n These shallow waters, never met\r\n What I needed\r\n I'm letting go\r\n A deeper dive\r\n Eternal silence of the sea\r\n I'm breathing\r\n Alive\r\n Where are you now\r\n Where are you now\r\n Under the brigh\r\n But faded lights\r\n You set my heart on fire\r\n Where are you now\r\n Where are you now\r\n \r\n The monsters running wild inside of me\r\n I'm faded","media":"[{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=pkvLpGfSdb8\"}]"},
                      {"song_id":"2984243","artist_id":"456537","title":"Faded (Restrung)","title_with_featured":"Faded (Restrung)","full_title":"Faded (Restrung) by Alan Walker","artist":"Alan Walker","lyrics":"You were the shadow to my light\r\n Did you feel us?\r\n Another star\r\n You fade away\r\n Afraid our aim is out of sight\r\n Wanna see us\r\n Alight\r\n \r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n \r\n Was it all in my fantasy?\r\n Where are you now?\r\n Were you only imaginary?\r\n Where are you now?\r\n \r\n Atlantis\r\n Under the sea, under the sea\r\n Where are you now?\r\n Another dream\r\n The monster's running wild inside of me\r\n \r\n I'm faded\r\n I'm faded\r\n So lost, I'm faded\r\n These shallow waters never met\r\n What I needed\r\n I'm letting go\r\n A deeper dive\r\n Eternal silence of the sea\r\n I'm breathing\r\n Alive\r\n \r\n Where are you now?\r\n Where are you now?\r\n \r\n Under the bright\r\n But faded lights\r\n You set my heart on fire\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n \r\n Where are you now?\r\n \r\n Atlantis\r\n Under the sea, under the sea\r\n Where are you now?\r\n Another dream\r\n The monster's running wild inside of me\r\n I'm faded\r\n I'm faded\r\n So lost, I'm faded","media":"[{\"provider\":\"apple_music\",\"provider_id\":\"1196294706\",\"type\":\"audio\",\"url\":\"https:\\/\\/itunes.apple.com\\/lookup?entity=song\u0026id=1196294706\"},{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=bDmzGLrdjxQ\"}]"},
                      {"song_id":"3492535","artist_id":"456537","title":"Faded (Y\u0026V Remix)","title_with_featured":"Faded (Y\u0026V Remix)","full_title":"Faded (Y\u0026V Remix) by Alan Walker","artist":"Alan Walker","lyrics":"You were the shadow to my light\r\n Did you feel us\r\n Another start\r\n You fade away\r\n Afraid our aim is out of sight\r\n Wanna see us\r\n Alive\r\n \r\n Where are you now\r\n Where are you now\r\n Where are you now\r\n Was it all in my fantasy\r\n Where are you now\r\n Were you only imaginary\r\n \r\n Where are you now\r\n Atlantis\r\n Under the sea\r\n Under the sea\r\n Where are you now\r\n Another dream\r\n The monsters running wild inside of me\r\n \r\n I'm faded\r\n I'm faded\r\n So lost\r\n I'm faded\r\n I'm faded\r\n So lost\r\n I'm faded\r\n These shallow waters, never met\r\n What I needed\r\n I'm letting go\r\n A deeper dive\r\n Eternal silence of the sea\r\n I'm breathing\r\n Alive\r\n \r\n Where are you now\r\n Where are you now\r\n \r\n Under the bright\r\n But faded lights\r\n You set my heart on fire\r\n Where are you now\r\n Where are you now\r\n Where are you now\r\n Atlantis\r\n Under the sea\r\n Under the sea\r\n Where are you now\r\n Another dream\r\n The monsters running wild inside of me\r\n I'm faded\r\n I'm faded\r\n So lost\r\n I'm faded\r\n I'm faded\r\n So lost\r\n I'm faded","media":"[{\"provider\":\"apple_music\",\"provider_id\":\"1196295327\",\"type\":\"audio\",\"url\":\"https:\\/\\/itunes.apple.com\\/lookup?entity=song\u0026id=1196295327\"},{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=cXubCdpVX_c\"}]"},
                      {"song_id":"3492525","artist_id":"456537","title":"Faded (Paul Gannon Remix)","title_with_featured":"Faded (Paul Gannon Remix)","full_title":"Faded (Paul Gannon Remix) by Alan Walker","artist":"Alan Walker","lyrics":"[Verse 1: Iselin Solheim]\r\n You were the shadow to my light\r\n Did you feel us?\r\n Another star, you fade away\r\n Afraid our aim is out of sight\r\n Wanna see us alight\r\n \r\n [Pre-Chorus: Iselin Solheim]\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n \r\n Where are you now?\r\n \r\n [Chorus: Iselin Solheim]\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n \r\n Where are you now?\r\n \r\n [Verse 2: Iselin Solheim]\r\n These shallow waters never met what I needed\r\n I'm letting go, a deeper dive\r\n Eternal silence of the sea\r\n I'm breathing, alive\r\n [Pre-Chorus: Iselin Solheim]\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n \r\n Where are you now?\r\n \r\n [Chorus: Iselin Solheim]\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n \r\n Where are you now?","media":"[{\"attribution\":\"paul gannon 2nd account\",\"provider\":\"soundcloud\",\"type\":\"audio\",\"url\":\"https:\\/\\/soundcloud.com\\/paul-gannon-2nd-account\\/alan-walker-faded-paul-gannon-bootleg\"},{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=bNEVp5ACb0c\"}]"},
                      {"song_id":"3492536","artist_id":"456537","title":"Faded (Tiesto's Northern Lights Remix)","title_with_featured":"Faded (Tiesto's Northern Lights Remix)","full_title":"Faded (Tiesto's Northern Lights Remix) by Alan Walker","artist":"Alan Walker","lyrics":"[Verse 1]\r\n You were the shadow to my light\r\n Did you feel us?\r\n Another star, you fade away\r\n Afraid our aim is out of sight\r\n Wanna see us alight\r\n \r\n [Pre-Chorus 1]\r\n Where are you now?\r\n Where are you now?\r\n Where are you now?\r\n Was it all in my fantasy?\r\n Where are you now?\r\n Were you only imaginary?\r\n \r\n [Chorus]\r\n Where are you now?\r\n Atlantis, under the sea, under the sea\r\n Where are you now? Another dream\r\n The monster's running wild inside of me\r\n I'm faded, I'm faded\r\n So lost, I'm faded, I'm faded\r\n So lost, I'm faded\r\n \r\n [Verse 2]\r\n These shallow waters never met what I needed\r\n I'm letting go, a deeper dive\r\n Eternal silence of the sea\r\n I'm breathing, alive\r\n [Pre-Chorus 2]\r\n Where are you now?\r\n Where are you now?\r\n Under the bright but faded lights\r\n You set my heart on fire\r\n Where are you now?\r\n Where are you now?\r\n \r\n [Chorus]\r\n Where are you now?\r\n Atlantis, under the sea, under the sea\r\n Where are you now? Another dream\r\n The monster's running wild inside of me\r\n I'm faded, I'm faded\r\n So lost, I'm faded, I'm faded\r\n So lost, I'm faded","media":"[{\"provider\":\"apple_music_preview\",\"type\":\"audio\",\"url\":\"https:\\/\\/audio-ssl.itunes.apple.com\\/apple-assets-us-std-000001\\/AudioPreview111\\/v4\\/54\\/a9\\/02\\/54a902ec-bad6-8e1c-e6c8-6f68016401f0\\/mzaf_3574986902134215787.plus.aac.p.m4a\"},{\"duration\":250.28,\"provider\":\"apple_music\",\"provider_id\":\"1196295329\",\"type\":\"audio\",\"url\":\"https:\\/\\/itunes.apple.com\\/lookup?entity=song\u0026id=1196295329\"},{\"provider\":\"youtube\",\"start\":0,\"type\":\"video\",\"url\":\"http:\\/\\/www.youtube.com\\/watch?v=k8GRwt0Aa-A\"}]"}]}

"""
import requests
from django.shortcuts import render
from .forms import FindByExcerptForm

API_TOKEN = '9e52feb50f4486671a961365b1340fdf'
URL = 'https://api.audd.io/'
headers = {'Content-Type': 'multipart/form-data'}


def home(request):
    return render(request, 'akinator/home.html')


def playground(request):
    form = FindByExcerptForm()
    if request.method == 'POST':
        form = FindByExcerptForm(request.POST)
        if form.is_valid():
            user_input = form.cleaned_data['lyrics']
            params = {
                'method': 'findLyrics',
                'q': user_input,
                'api_token': API_TOKEN
            }
            response = requests.post(URL, headers=headers, params=params)
            results = response.json().get('result', None)
            if results is not None:
                titles = [result['full_title'] for result in results]
                return render(request, 'akinator/playground.html', {'form': form, 'titles': titles})
            # else flash error message
    return render(request, 'akinator/playground.html', {'form':form})
